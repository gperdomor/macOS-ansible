---

- name: Show the main window when launching Activity Monitor
  osx_defaults:
    domain: com.apple.ActivityMonitor
    key: OpenMainWindow
    type: bool
    value: true

- name: "{{ item.name }}"
  osx_defaults:
    domain: com.apple.ActivityMonitor
    key: "{{ item.key }}"
    type: int
    value: "{{ item.value }}"
  with_items:
    - name: Visualize CPU usage in the Activity Monitor Dock icon
      key: IconType
      value: 5
    - name: Show all processes in Activity Monitor
      key: ShowCategory
      value: 0

- name: Sort Activity Monitor results by CPU usage
  osx_defaults:
    domain: com.apple.ActivityMonitor
    key: "{{ item.key }}"
    type: "{{ item.type }}"
    value: "{{ item.value }}"
  with_items:
    - key: SortColumn
      type: string
      value: CPUUsage
    - key: SortDirection
      type: int
      value: 0
